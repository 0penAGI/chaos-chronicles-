<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–•–†–û–ù–ò–ö–ò –¢–†–ê–ì–ï–î–ò–ò –°–õ–ê–ô–î–û–í</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }
  
  body {
    font-family: 'Courier New', monospace;
    background: linear-gradient(45deg, #000000, #1a0033, #330033, #000000);
    background-size: 400% 400%;
    animation: chaosGradient 5s ease infinite;
    color: #FFFFFF;
    overflow: hidden;
    height: 100vh;
    touch-action: manipulation;
  }
  
  @keyframes chaosGradient {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  #game-container {
    width: 100%;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    padding: 10px;
  }
  
  #stats-container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 800px;
    margin-bottom: 10px;
  }
  
  #timer {
    font-size: 24px;
    font-weight: bold;
    color: #00FF00;
    text-shadow: 0 0 10px #00FF00;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 10px;
    border-radius: 10px;
  }
  
  #chaos-meter {
    font-size: 20px;
    font-weight: bold;
    color: #FF0000;
    text-shadow: 0 0 10px #FF0000;
    animation: pulse 0.5s infinite;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 10px;
    border-radius: 10px;
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  
  #score-display {
    font-size: 20px;
    color: #00FFFF;
    text-shadow: 0 0 10px #00FFFF;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 10px;
    border-radius: 10px;
  }
  
  #game-scene {
    width: 100%;
    max-width: 800px;
    height: 60vh;
    min-height: 400px;
    background: rgba(247, 215, 212, 0.1);
    border: 2px solid #FF5D2E;
    box-shadow: 0 0 20px rgba(255, 93, 46, 0.8), inset 0 0 30px rgba(0, 0, 0, 0.5);
    padding: 15px;
    position: relative;
    overflow: hidden;
    animation: sceneShake 0.3s infinite;
    border-radius: 10px;
  }
  
  @keyframes sceneShake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(-1px, 1px) rotate(-0.3deg); }
    50% { transform: translate(1px, -1px) rotate(0.3deg); }
    75% { transform: translate(-1px, -1px) rotate(-0.3deg); }
  }
  
  #scene-content {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  #scene-title {
    font-size: 28px;
    font-weight: bold;
    color: #FFD700;
    text-shadow: 0 0 10px #FFD700, 0 0 20px #FF5D2E;
    margin-bottom: 15px;
    animation: titleGlitch 1s infinite;
    text-align: center;
  }
  
  @keyframes titleGlitch {
    0%, 90%, 100% { transform: translate(0, 0); }
    92% { transform: translate(-3px, 1px); }
    94% { transform: translate(3px, -1px); }
    96% { transform: translate(-2px, -2px); }
  }
  
  .scene-description {
    font-size: 16px;
    text-align: center;
    margin-bottom: 20px;
    max-width: 95%;
    line-height: 1.4;
    color: #FFA500;
    text-shadow: 0 0 5px #FFA500;
  }
  
  #buttons-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-height: 50%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding: 5px;
  }
  
  .slide-button {
    margin: 8px 0;
    padding: 15px 10px;
    font-size: 18px;
    font-weight: bold;
    background: linear-gradient(45deg, #FF0000, #FF5D2E, #FFD700);
    background-size: 200% 200%;
    border: 2px solid #FFFFFF;
    color: #000000;
    cursor: pointer;
    transition: all 0.3s;
    text-shadow: 0 0 5px #FFFFFF;
    animation: buttonPulse 2s infinite;
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    width: 100%;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }
  
  @keyframes buttonPulse {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .slide-button:active {
    transform: scale(0.95);
    box-shadow: 0 0 20px #FF5D2E;
  }
  
  #alert-element {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 18px;
    font-weight: bold;
    color: #FF0000;
    text-shadow: 0 0 5px #FF0000, 0 0 10px #FFFFFF;
    text-align: center;
    animation: alertBlink 0.5s infinite;
    padding: 10px 15px;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid #FF0000;
    border-radius: 8px;
    width: 95%;
    max-width: 500px;
  }
  
  @keyframes alertBlink {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0.3; }
  }
  
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #FFD700;
    border-radius: 50%;
    pointer-events: none;
    animation: particleFloat 2s infinite;
  }
  
  @keyframes particleFloat {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-300px) scale(0); opacity: 0; }
  }
  
  .wrong-choice {
    animation: wrongShake 0.5s;
  }
  
  @keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
  }
  
  .choice-feedback {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    font-weight: bold;
    padding: 15px 25px;
    border-radius: 8px;
    z-index: 100;
    animation: feedbackPulse 1s;
    text-align: center;
    width: 80%;
  }
  
  @keyframes feedbackPulse {
    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
    50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  }
  
  .correct-feedback {
    background: rgba(0, 255, 0, 0.8);
    color: #000;
    border: 2px solid #00FF00;
  }
  
  .wrong-feedback {
    background: rgba(255, 0, 0, 0.8);
    color: #FFF;
    border: 2px solid #FF0000;
  }
  
  #achievements {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #FFD700;
    max-width: 150px;
    display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
  }
  
  .achievement {
    font-size: 12px;
    margin: 3px 0;
    color: #FFD700;
  }
  
  .achievement.unlocked {
    text-shadow: 0 0 3px #FFD700;
  }
  
  .achievement.locked {
    color: #666;
  }
  
  #chaos-visual {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
  }
  
  .chaos-element {
    position: absolute;
    opacity: 0;
    animation: chaosElement 3s infinite;
  }
  
  @keyframes chaosElement {
    0%, 100% { opacity: 0; transform: scale(0.5) rotate(0deg); }
    50% { opacity: 0.2; transform: scale(1) rotate(180deg); }
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–±–æ */
  #combo-display {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    font-weight: bold;
    color: #FFD700;
    text-shadow: 0 0 10px #FFD700, 0 0 20px #FF5D2E;
    background: rgba(0, 0, 0, 0.7);
    padding: 5px 15px;
    border-radius: 20px;
    border: 2px solid #FFD700;
    z-index: 10;
    display: none;
  }
  
  .combo-animation {
    animation: comboPulse 0.5s infinite;
  }
  
  @keyframes comboPulse {
    0%, 100% { transform: translateX(-50%) scale(1); }
    50% { transform: translateX(-50%) scale(1.2); }
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—É–ø–µ—Ä-—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π */
  #powers-container {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 10;
  }
  
  .power-button {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    border: 2px solid #FFFFFF;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    cursor: pointer;
    background: rgba(0, 0, 0, 0.7);
    transition: all 0.3s;
  }
  
  .power-button:active {
    transform: scale(0.9);
  }
  
  .power-button.disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  .power-count {
    position: absolute;
    bottom: -5px;
    right: -5px;
    background: #FF0000;
    color: #FFFFFF;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
  }
  
  /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
  @media (max-height: 700px) {
    #game-scene {
      height: 55vh;
      min-height: 350px;
    }
    
    .scene-description {
      font-size: 14px;
      margin-bottom: 15px;
    }
    
    .slide-button {
      padding: 12px 8px;
      font-size: 16px;
      min-height: 50px;
    }
    
    #scene-title {
      font-size: 24px;
      margin-bottom: 10px;
    }
  }
  
  @media (max-width: 350px) {
    #stats-container {
      flex-wrap: wrap;
      justify-content: center;
    }
    
    #timer, #chaos-meter, #score-display {
      margin: 2px;
      font-size: 16px;
    }
    
    #scene-title {
      font-size: 22px;
    }
    
    .scene-description {
      font-size: 14px;
    }
    
    .slide-button {
      font-size: 16px;
      min-height: 45px;
    }
  }
  
  /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
  @media (max-height: 500px) and (orientation: landscape) {
    #game-container {
      flex-direction: row;
      padding: 5px;
    }
    
    #stats-container {
      flex-direction: column;
      width: auto;
      margin-bottom: 0;
      margin-right: 10px;
    }
    
    #game-scene {
      height: 95vh;
      width: 70%;
    }
    
    #timer, #chaos-meter, #score-display {
      margin-bottom: 10px;
      font-size: 16px;
    }
    
    #alert-element {
      bottom: 5px;
      font-size: 16px;
    }
    
    #powers-container {
      flex-direction: row;
      bottom: 5px;
      left: 5px;
    }
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="stats-container">
    <div id="timer">‚è±Ô∏è <span id="time-value">0</span>—Å</div>
    <div id="chaos-meter">üî• –•–ê–û–°: <span id="chaos-value">0</span>%</div>
    <div id="score-display">üíÄ <span id="score-value">0</span></div>
  </div>
  
  <div id="combo-display">–ö–û–ú–ë–û: x<span id="combo-value">1</span></div>
  
  <div id="game-scene">
    <div id="scene-content">
      <div id="scene-title">–ù–ê–ß–ê–õ–û –ö–û–ù–¶–ê</div>
      <div id="scene-description" class="scene-description"></div>
      <div id="buttons-container"></div>
    </div>
  </div>
  
  <div id="alert-element">‚ö†Ô∏è –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –•–ê–û–°! ‚ö†Ô∏è</div>
  
  <div id="powers-container">
    <div class="power-button" id="hint-power" data-power="hint">
      üí°
      <div class="power-count" id="hint-count">2</div>
    </div>
    <div class="power-button" id="slow-power" data-power="slow">
      ‚è≥
      <div class="power-count" id="slow-count">2</div>
    </div>
    <div class="power-button" id="shield-power" data-power="shield">
      üõ°Ô∏è
      <div class="power-count" id="shield-count">1</div>
    </div>
  </div>
  
  <div id="achievements">
    <div class="achievement locked">üîí –ü–µ—Ä–≤—ã–π —à–∞–≥</div>
    <div class="achievement locked">üîí –ú–∞—Å—Ç–µ—Ä —Ö–∞–æ—Å–∞</div>
    <div class="achievement locked">üîí –ü–æ–±–µ–¥–∏—Ç–µ–ª—å —ç–Ω—Ç—Ä–æ–ø–∏–∏</div>
  </div>
  
  <div id="chaos-visual"></div>
</div>

<script>
  // –ü–ï–†–ï–ú–ï–ù–ù–´–ï –•–ê–û–°–ê
  let currentScene = 1;
  let chaosLevel = 0;
  let score = 0;
  let timeElapsed = 0;
  let isGameOver = false;
  let achievements = {
    firstStep: false,
    chaosMaster: false,
    entropyWinner: false
  };
  
  // –ù–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –î–õ–Ø –°–ò–°–¢–ï–ú–´ –ö–û–ú–ë–û –ò –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô
  let comboCount = 0;
  let comboMultiplier = 1;
  let isChaosPaused = false;
  let isShieldActive = false;
  let shieldTimer = 0;
  let slowTimeTimer = 0;
  
  // –°–ß–Å–¢–ß–ò–ö–ò –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô
  let powers = {
    hint: { count: 2, element: null },
    slow: { count: 2, element: null },
    shield: { count: 1, element: null }
  };
  
  // –°–¶–ï–ù–´ –¢–†–ê–ì–ï–î–ò–ò (–£–í–ï–õ–ò–ß–ï–ù–ù–û –î–û 10 –°–¶–ï–ù)
  const scenes = [
    {
      id: 1,
      title: "üåÄ –ù–ê–ß–ê–õ–û –ö–û–ù–¶–ê",
      description: "–í—ã —Å—Ç–æ–∏—Ç–µ –Ω–∞ –ø–æ—Ä–æ–≥–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, —á—É–≤—Å—Ç–≤—É—è, –∫–∞–∫ —Ç–∫–∞–Ω—å –±—ã—Ç–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å–ø–∞–¥–∞—Ç—å—Å—è. –í—Ä–µ–º—è –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏—Å–∫–∞–∂–∞—é—Ç—Å—è –≤–æ–∫—Ä—É–≥ –≤–∞—Å.",
      choices: ["üö™ –í–æ–π—Ç–∏ –≤ –ø–æ—Ä—Ç–∞–ª", "üèÉ –£–±–µ–∂–∞—Ç—å –æ—Ç —Å—É–¥—å–±—ã", "üíÄ –ü—Ä–∏–Ω—è—Ç—å —Ö–∞–æ—Å"],
      correctIndex: 2,
      messages: ["–¢—Ä—É—Å–æ—Å—Ç—å –Ω–µ —Å–ø–∞—Å—ë—Ç!", "–°—É–¥—å–±–∞ –Ω–∞—Å—Ç–∏–≥–Ω–µ—Ç!", "–í–´ –ü–†–ò–ù–Ø–õ–ò –•–ê–û–°!"]
    },
    {
      id: 2,
      title: "üëÅÔ∏è –ë–ï–ó–î–ù–ê –í–û–ü–ò–¢",
      description: "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ä–∞–∑–≤–µ—Ä–∑–ª–∞—Å—å –±–µ–∑–¥–Ω–∞, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —à–µ–ø–æ—Ç–æ–º –∑–∞–±—ã—Ç—ã—Ö –º–∏—Ä–æ–≤. –ï—ë –≥–æ–ª–æ—Å –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ —Å–∞–º–æ–µ —Å–æ–∑–Ω–∞–Ω–∏–µ.",
      choices: ["üëÅÔ∏è –°–º–æ—Ç—Ä–µ—Ç—å –≤ –±–µ–∑–¥–Ω—É", "üî• –°–∂–µ—á—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å", "‚ùÑÔ∏è –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –≤—Ä–µ–º—è"],
      correctIndex: 0,
      messages: ["–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–æ—è–ª–∞!", "–í—Ä–µ–º—è –Ω–µ –ø–æ–¥–≤–ª–∞—Å—Ç–Ω–æ!", "–ë–ï–ó–î–ù–ê –°–ú–û–¢–†–ò–¢ –ù–ê–ó–ê–î!"]
    },
    {
      id: 3,
      title: "üíÉ –¢–ê–ù–ï–¶ –≠–ù–¢–†–û–ü–ò–ò",
      description: "–í—Å–µ–ª–µ–Ω–Ω–∞—è —Ç–∞–Ω—Ü—É–µ—Ç —Å–≤–æ–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∞–Ω–µ—Ü. –ß–∞—Å—Ç–∏—Ü—ã –º–∞—Ç–µ—Ä–∏–∏ —Ä–∞—Å–ø–∞–¥–∞—é—Ç—Å—è –≤ —Ä–∏—Ç–º–µ –≤—Å–µ–ª–µ–Ω—Å–∫–æ–π —Å–∏–º—Ñ–æ–Ω–∏–∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è.",
      choices: ["üíÉ –¢–∞–Ω—Ü–µ–≤–∞—Ç—å —Å —Ö–∞–æ—Å–æ–º", "‚ö° –°—Ç–∞—Ç—å –º–æ–ª–Ω–∏–µ–π", "üåä –£—Ç–æ–Ω—É—Ç—å –≤ –≤–æ–ª–Ω–∞—Ö"],
      correctIndex: 0,
      messages: ["–ú–æ–ª–Ω–∏—è —É–¥–∞—Ä–∏–ª–∞ –≤ –≤–∞—Å!", "–í–æ–ª–Ω—ã –ø–æ–≥–ª–æ—Ç–∏–ª–∏!", "–í–´ –°–¢–ê–õ–ò –•–ê–û–°–û–ú!"]
    },
    {
      id: 4,
      title: "üé≠ –≠–•–û –†–ê–ó–†–£–®–ï–ù–ò–Ø",
      description: "–û—Ç–≥–æ–ª–æ—Å–∫–∏ –≤–∞—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π —Ä–∞–∑–Ω–æ—Å—è—Ç—Å—è –ø–æ —Ä—É—à–∞—â–µ–π—Å—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –º–∏—Ä—ã –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ.",
      choices: ["üé≠ –°–Ω—è—Ç—å –º–∞—Å–∫—É", "üé™ –í–æ–π—Ç–∏ –≤ —Ü–∏—Ä–∫", "üé® –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥"],
      correctIndex: 2,
      messages: ["–õ–∏—Ü–æ —Ä–∞—Å—Ç–≤–æ—Ä–∏–ª–æ—Å—å!", "–¶–∏—Ä–∫ –Ω–µ –æ—Ç–ø—É—Å–∫–∞–µ—Ç!", "–í–´–•–û–î –°–û–ó–î–ê–ù!"]
    },
    {
      id: 5,
      title: "üåë –ó–ê–¢–ú–ï–ù–ò–ï –†–ê–ó–£–ú–ê",
      description: "–í–∞—à —Ä–∞–∑—É–º –æ–∫—É—Ç—ã–≤–∞–µ—Ç —Ç—å–º–∞. –¢–µ–Ω–∏ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –±—É–¥—É—â–µ–≥–æ —Å–ª–∏–≤–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω—ã–π –∫–æ—à–º–∞—Ä –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ.",
      choices: ["üïØÔ∏è –ó–∞–∂–µ—á—å —Å–≤–µ—á—É", "üåÖ –í—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ä–∞—Å—Å–≤–µ—Ç", "üåå –ü–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤–æ —Ç—å–º—É"],
      correctIndex: 1,
      messages: ["–°–≤–µ—á–∞ –ø–æ–≥–∞—Å–ª–∞!", "–¢—å–º–∞ –ø–æ–≥–ª–æ—Ç–∏–ª–∞!", "–†–ê–°–°–í–ï–¢ –ü–†–û–ì–ù–ê–õ –¢–ï–ù–ò!"]
    },
    {
      id: 6,
      title: "‚ö° –ë–£–†–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô",
      description: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è —à—Ç–æ—Ä–º–æ–º –ø–µ—Ä–µ–º–µ–Ω. –ö–∞–∂–¥–∞—è –º–æ–ª–Ω–∏—è —Ä–æ–∂–¥–∞–µ—Ç –Ω–æ–≤—É—é –≤—Å–µ–ª–µ–Ω–Ω—É—é –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —Å—Ç–∞—Ä—É—é.",
      choices: ["‚ö° –õ–æ–≤–∏—Ç—å –º–æ–ª–Ω–∏–∏", "üåÄ –í–æ–π—Ç–∏ –≤ —ç–ø–∏—Ü–µ–Ω—Ç—Ä", "üõ°Ô∏è –£–∫—Ä—ã—Ç—å—Å—è –æ—Ç –±—É—Ä–∏"],
      correctIndex: 1,
      messages: ["–ú–æ–ª–Ω–∏–∏ —Å–æ–∂–≥–ª–∏!", "–£–∫—Ä—ã—Ç–∏–µ —Ä—É—Ö–Ω—É–ª–æ!", "–í–´ –°–¢–ê–õ–ò –¶–ï–ù–¢–†–û–ú –ë–£–†–ò!"]
    },
    {
      id: 7,
      title: "üîÆ –ö–†–ò–°–¢–ê–õ–õ –°–£–î–ï–ë",
      description: "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –ø–∞—Ä–∏—Ç –∫—Ä–∏—Å—Ç–∞–ª–ª, –≤ –≥—Ä–∞–Ω—è—Ö –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—É–¥—å–±—ã.",
      choices: ["üîÆ –ó–∞–≥–ª—è–Ω—É—Ç—å –≤ –∫—Ä–∏—Å—Ç–∞–ª–ª", "üíé –†–∞–∑–±–∏—Ç—å –∏–ª–ª—é–∑–∏–∏", "üåà –ü–æ–π–º–∞—Ç—å –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ"],
      correctIndex: 0,
      messages: ["–ò–ª–ª—é–∑–∏–∏ —Ä–∞–∑–±–∏–ª–∏—Å—å!", "–û—Ç—Ä–∞–∂–µ–Ω–∏–µ —É—Å–∫–æ–ª—å–∑–Ω—É–ª–æ!", "–í–´ –£–í–ò–î–ï–õ–ò –í–°–ï –°–£–î–¨–ë–´!"]
    },
    {
      id: 8,
      title: "üåã –ò–ó–í–ï–†–ñ–ï–ù–ò–ï –•–ê–û–°–ê",
      description: "–•–∞–æ—Å –∏–∑–≤–µ—Ä–≥–∞–µ—Ç—Å—è –∏–∑ –Ω–µ–¥—Ä —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, —É–≥—Ä–æ–∂–∞—è –ø–æ–≥–ª–æ—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Å—Ç—Ä–æ–≤–∫–∏ –ø–æ—Ä—è–¥–∫–∞.",
      choices: ["üåã –ë—Ä–æ—Å–∏—Ç—å—Å—è –≤ –∂–µ—Ä–ª–æ", "üèîÔ∏è –í–∑–æ–±—Ä–∞—Ç—å—Å—è –Ω–∞ –ø–∏–∫", "üåä –ü–µ—Ä–µ–ø–ª—ã—Ç—å –ª–∞–≤—É"],
      correctIndex: 1,
      messages: ["–ñ–µ—Ä–ª–æ –ø–æ–≥–ª–æ—Ç–∏–ª–æ!", "–õ–∞–≤–∞ —Å–æ–∂–≥–ª–∞!", "–í–´ –ü–û–î–ù–Ø–õ–ò–°–¨ –ù–ê–î –•–ê–û–°–û–ú!"]
    },
    {
      id: 9,
      title: "‚≠ê –†–û–ñ–î–ï–ù–ò–ï –°–í–ï–†–•–ù–û–í–û–ô",
      description: "–í—ã —Å—Ç–æ–∏—Ç–µ –≤ —ç–ø–∏—Ü–µ–Ω—Ç—Ä–µ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –≤–∑—Ä—ã–≤–∞, –≥–¥–µ —Ä–æ–∂–¥–∞—é—Ç—Å—è –∏ —É–º–∏—Ä–∞—é—Ç –∑–≤—ë–∑–¥—ã.",
      choices: ["‚≠ê –°—Ç–∞—Ç—å —Å–≤–µ—Ä—Ö–Ω–æ–≤–æ–π", "üå† –ò—Å–ø—É—Å—Ç–∏—Ç—å —Å–≤–µ—Ç", "üí• –í–∑–æ—Ä–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ"],
      correctIndex: 0,
      messages: ["–°–≤–µ—Ç –ø–æ–≥–∞—Å!", "–í–∑—Ä—ã–≤ –ø–æ–≥–ª–æ—Ç–∏–ª!", "–í–´ –°–¢–ê–õ–ò –°–í–ï–†–•–ù–û–í–û–ô!"]
    },
    {
      id: 10,
      title: "‚ôæÔ∏è –ë–ï–°–ö–û–ù–ï–ß–ù–ê–Ø –ü–ï–¢–õ–Ø",
      description: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–º—ã–∫–∞–µ—Ç—Å—è –≤ –ø–µ—Ç–ª—é. –ö–∞–∂–¥–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤–µ–¥—ë—Ç –∫ –Ω–∞—á–∞–ª—É, –Ω–æ —Å –Ω–æ–≤—ã–º–∏ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º–∏.",
      choices: ["‚ôæÔ∏è –í–æ–π—Ç–∏ –≤ –ø–µ—Ç–ª—é", "‚è© –£—Å–∫–æ—Ä–∏—Ç—å –≤—Ä–µ–º—è", "‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë"],
      correctIndex: 2,
      messages: ["–ü–µ—Ç–ª—è –∑–∞—Ç—è–Ω—É–ª–∞!", "–í—Ä–µ–º—è —É—Å–∫–æ—Ä–∏–ª–æ—Å—å!", "–í–´ –û–°–¢–ê–ù–û–í–ò–õ–ò –ë–ï–°–ö–û–ù–ï–ß–ù–û–°–¢–¨!"]
    }
  ];
  
  // –≠–õ–ï–ú–ï–ù–¢–´
  const sceneTitle = document.getElementById('scene-title');
  const sceneDescription = document.getElementById('scene-description');
  const buttonsContainer = document.getElementById('buttons-container');
  const alertElement = document.getElementById('alert-element');
  const chaosValue = document.getElementById('chaos-value');
  const scoreValue = document.getElementById('score-value');
  const timeValue = document.getElementById('time-value');
  const gameScene = document.getElementById('game-scene');
  const chaosVisual = document.getElementById('chaos-visual');
  const achievementElements = document.querySelectorAll('.achievement');
  const comboDisplay = document.getElementById('combo-display');
  const comboValue = document.getElementById('combo-value');
  
  // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô
  function initializePowers() {
    powers.hint.element = document.getElementById('hint-power');
    powers.slow.element = document.getElementById('slow-power');
    powers.shield.element = document.getElementById('shield-power');
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
    powers.hint.element.addEventListener('click', () => usePower('hint'));
    powers.slow.element.addEventListener('click', () => usePower('slow'));
    powers.shield.element.addEventListener('click', () => usePower('shield'));
    
    updatePowerButtons();
  }
  
  // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–ù–û–ü–û–ö –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô
  function updatePowerButtons() {
    for (const power in powers) {
      const element = powers[power].element;
      const countElement = element.querySelector('.power-count');
      
      countElement.textContent = powers[power].count;
      
      if (powers[power].count === 0) {
        element.classList.add('disabled');
      } else {
        element.classList.remove('disabled');
      }
    }
  }
  
  // –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–ü–û–°–û–ë–ù–û–°–¢–ò
  function usePower(powerType) {
    if (powers[powerType].count <= 0 || isGameOver) return;
    
    powers[powerType].count--;
    updatePowerButtons();
    
    switch(powerType) {
      case 'hint':
        useHintPower();
        break;
      case 'slow':
        useSlowPower();
        break;
      case 'shield':
        useShieldPower();
        break;
    }
    
    // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
    if (navigator.vibrate) {
      navigator.vibrate(50);
    }
  }
  
  // –°–ü–û–°–û–ë–ù–û–°–¢–¨: –ü–û–î–°–ö–ê–ó–ö–ê
  function useHintPower() {
    const currentSceneData = scenes[currentScene - 1];
    const correctIndex = currentSceneData.correctIndex;
    
    // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
    const buttons = buttonsContainer.querySelectorAll('.slide-button');
    buttons[correctIndex].style.background = 'linear-gradient(45deg, #00FF00, #00CC00)';
    buttons[correctIndex].style.boxShadow = '0 0 20px #00FF00';
    
    showAlert('üí° –ü–û–î–°–ö–ê–ó–ö–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê!', 2000);
    
    // –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ —É–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
    setTimeout(() => {
      if (!isGameOver) {
        buttons[correctIndex].style.background = '';
        buttons[correctIndex].style.boxShadow = '';
      }
    }, 5000);
  }
  
  // –°–ü–û–°–û–ë–ù–û–°–¢–¨: –ó–ê–ú–ï–î–õ–ï–ù–ò–ï –í–†–ï–ú–ï–ù–ò
  function useSlowPower() {
    isChaosPaused = true;
    slowTimeTimer = 20; // 20 —Å–µ–∫—É–Ω–¥
    
    showAlert('‚è≥ –í–†–ï–ú–Ø –ó–ê–ú–ï–î–õ–ï–ù–û –ù–ê 20 –°–ï–ö–£–ù–î!', 2000);
    
    // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–º–µ–¥–ª–µ–Ω–∏—è
    gameScene.style.animationDuration = '2s';
    
    // –¢–∞–π–º–µ—Ä –¥–ª—è –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ö–∞–æ—Å–∞
    const slowInterval = setInterval(() => {
      slowTimeTimer--;
      
      if (slowTimeTimer <= 0 || isGameOver) {
        isChaosPaused = false;
        gameScene.style.animationDuration = '0.3s';
        clearInterval(slowInterval);
      }
    }, 1000);
  }
  
  // –°–ü–û–°–û–ë–ù–û–°–¢–¨: –©–ò–¢
  function useShieldPower() {
    isShieldActive = true;
    shieldTimer = 15; // 15 —Å–µ–∫—É–Ω–¥
    
    showAlert('üõ°Ô∏è –©–ò–¢ –ê–ö–¢–ò–í–ò–†–û–í–ê–ù –ù–ê 15 –°–ï–ö–£–ù–î!', 2000);
    
    // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —â–∏—Ç–∞
    gameScene.style.borderColor = '#00FF00';
    gameScene.style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.8), inset 0 0 30px rgba(0, 0, 0, 0.5)';
    
    // –¢–∞–π–º–µ—Ä –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —â–∏—Ç–∞
    const shieldInterval = setInterval(() => {
      shieldTimer--;
      
      if (shieldTimer <= 0 || isGameOver) {
        isShieldActive = false;
        gameScene.style.borderColor = '#FF5D2E';
        gameScene.style.boxShadow = '0 0 20px rgba(255, 93, 46, 0.8), inset 0 0 30px rgba(0, 0, 0, 0.5)';
        clearInterval(shieldInterval);
      }
    }, 1000);
  }
  
  // –§–£–ù–ö–¶–ò–ò –•–ê–û–°–ê
  function createParticles() {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 2 + 's';
    document.getElementById('game-container').appendChild(particle);
    setTimeout(() => particle.remove(), 2000);
  }
  
  function updateChaosVisual() {
    chaosVisual.innerHTML = '';
    const elementCount = Math.floor(chaosLevel / 10);
    
    for (let i = 0; i < elementCount; i++) {
      const element = document.createElement('div');
      element.className = 'chaos-element';
      element.style.left = Math.random() * 100 + '%';
      element.style.top = Math.random() * 100 + '%';
      element.style.width = Math.random() * 50 + 30 + 'px';
      element.style.height = Math.random() * 50 + 30 + 'px';
      element.style.background = `radial-gradient(circle, 
        rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.7), 
        transparent)`;
      element.style.borderRadius = Math.random() > 0.5 ? '50%' : '0%';
      element.style.animationDelay = Math.random() * 3 + 's';
      chaosVisual.appendChild(element);
    }
  }
  
  function updateChaos(increase = true) {
    // –ï—Å–ª–∏ —â–∏—Ç –∞–∫—Ç–∏–≤–µ–Ω, –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ö–∞–æ—Å
    if (increase && isShieldActive) {
      return;
    }
    
    if (increase) {
      chaosLevel += 10; // –£–º–µ–Ω—å—à–∏–ª —Å 20 –¥–æ 10 –¥–ª—è –±–∞–ª–∞–Ω—Å–∞
      if (chaosLevel > 100) chaosLevel = 100;
    } else {
      chaosLevel -= 10; // –£–º–µ–Ω—å—à–∞–µ–º —Ö–∞–æ—Å –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
      if (chaosLevel < 0) chaosLevel = 0;
    }
    
    chaosValue.textContent = chaosLevel;
    
    // –í–ò–ó–£–ê–õ–¨–ù–´–ô –•–ê–û–°
    if (chaosLevel > 50) {
      gameScene.style.animation = `sceneShake ${0.5 - (chaosLevel / 200)}s infinite`;
    }
    
    updateChaosVisual();
    
    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    if (chaosLevel >= 50 && !achievements.chaosMaster) {
      achievements.chaosMaster = true;
      achievementElements[1].classList.remove('locked');
      achievementElements[1].classList.add('unlocked');
      achievementElements[1].textContent = '‚úÖ –ú–∞—Å—Ç–µ—Ä —Ö–∞–æ—Å–∞';
      showAlert('–î–û–°–¢–ò–ñ–ï–ù–ò–ï: –ú–∞—Å—Ç–µ—Ä —Ö–∞–æ—Å–∞!', 3000);
    }
  }
  
  // –°–ò–°–¢–ï–ú–ê –ö–û–ú–ë–û
  function updateCombo(isCorrect) {
    if (isCorrect) {
      comboCount++;
      
      // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å –∫–∞–∂–¥—ã–µ 3 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞
      if (comboCount >= 3) {
        comboMultiplier = Math.floor(comboCount / 3) + 1;
        if (comboMultiplier > 5) comboMultiplier = 5;
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–º–±–æ-–∞–Ω–∏–º–∞—Ü–∏—é
        showComboAnimation();
      }
    } else {
      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–æ–º–±–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ
      comboCount = 0;
      comboMultiplier = 1;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–±–æ
    comboValue.textContent = comboMultiplier;
    
    if (comboCount >= 3) {
      comboDisplay.style.display = 'block';
      comboDisplay.classList.add('combo-animation');
    } else {
      comboDisplay.style.display = 'none';
      comboDisplay.classList.remove('combo-animation');
    }
  }
  
  function showComboAnimation() {
    // –°–æ–∑–¥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è –∫–æ–º–±–æ
    for (let i = 0; i < 30; i++) {
      setTimeout(() => {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.background = '#FFD700';
        particle.style.width = '8px';
        particle.style.height = '8px';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        document.getElementById('game-container').appendChild(particle);
        setTimeout(() => particle.remove(), 2000);
      }, i * 50);
    }
    
    // –ú–∏–≥–∞—é—â–∏–π —Ç–µ–∫—Å—Ç –∫–æ–º–±–æ
    let blinkCount = 0;
    const blinkInterval = setInterval(() => {
      comboDisplay.style.visibility = comboDisplay.style.visibility === 'hidden' ? 'visible' : 'hidden';
      blinkCount++;
      
      if (blinkCount >= 6) {
        clearInterval(blinkInterval);
        comboDisplay.style.visibility = 'visible';
      }
    }, 200);
  }
  
  function loadScene(sceneIndex) {
    if (sceneIndex >= scenes.length) {
      endGame(true);
      return;
    }
    
    const scene = scenes[sceneIndex];
    sceneTitle.textContent = scene.title;
    sceneDescription.textContent = scene.description;
    buttonsContainer.innerHTML = '';
    
    scene.choices.forEach((choice, index) => {
      const button = document.createElement('button');
      button.className = 'slide-button';
      button.textContent = choice;
      button.onclick = () => makeChoice(index, scene);
      buttonsContainer.appendChild(button);
    });
    
    // –ü–µ—Ä–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
    if (sceneIndex === 0 && !achievements.firstStep) {
      achievements.firstStep = true;
      achievementElements[0].classList.remove('locked');
      achievementElements[0].classList.add('unlocked');
      achievementElements[0].textContent = '‚úÖ –ü–µ—Ä–≤—ã–π —à–∞–≥';
    }
    
    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ö–∞–æ—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–π —Å—Ü–µ–Ω—ã
    updateChaos(true);
    
    // –°–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
    for (let i = 0; i < 5; i++) {
      setTimeout(createParticles, i * 200);
    }
  }
  
  function showAlert(message, duration = 1500) {
    alertElement.textContent = message;
    setTimeout(() => {
      if (!isGameOver) {
        alertElement.textContent = '‚ö†Ô∏è –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! ‚ö†Ô∏è';
      }
    }, duration);
  }
  
  function showFeedback(message, isCorrect) {
    const feedback = document.createElement('div');
    feedback.className = `choice-feedback ${isCorrect ? 'correct-feedback' : 'wrong-feedback'}`;
    feedback.textContent = message;
    document.getElementById('scene-content').appendChild(feedback);
    
    setTimeout(() => {
      feedback.remove();
    }, 1500);
  }
  
  function makeChoice(choiceIndex, scene) {
    if (isGameOver) return;
    
    const isCorrect = choiceIndex === scene.correctIndex;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–º–±–æ
    updateCombo(isCorrect);
    
    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
    showAlert('‚ö†Ô∏è ' + scene.messages[choiceIndex] + ' ‚ö†Ô∏è');
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
    showFeedback(isCorrect ? '‚úì –ü–†–ê–í–ò–õ–¨–ù–û!' : '‚úó –û–®–ò–ë–ö–ê!', isCorrect);
    
    // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
    if (navigator.vibrate) {
      navigator.vibrate(isCorrect ? [50, 50, 50] : [200]);
    }
    
    if (isCorrect) {
      // –ù–∞—á–∏—Å–ª—è–µ–º –æ—á–∫–∏ —Å —É—á–µ—Ç–æ–º –∫–æ–º–±–æ-–º–Ω–æ–∂–∏—Ç–µ–ª—è –∏ —É—Ä–æ–≤–Ω—è —Ö–∞–æ—Å–∞
      const basePoints = 100;
      const chaosBonus = Math.floor(chaosLevel * 2);
      const comboBonus = comboMultiplier > 1 ? (basePoints * (comboMultiplier - 1)) : 0;
      const pointsEarned = basePoints + chaosBonus + comboBonus;
      
      score += pointsEarned;
      scoreValue.textContent = score;
      
      // –£–º–µ–Ω—å—à–∞–µ–º —Ö–∞–æ—Å –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ
      updateChaos(false);
      
      // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ü–µ–Ω–µ
      currentScene++;
      setTimeout(() => loadScene(currentScene - 1), 1500);
      
      // –≠–§–§–ï–ö–¢ –£–°–ü–ï–•–ê
      for (let i = 0; i < 20; i++) {
        setTimeout(createParticles, i * 50);
      }
    } else {
      // –®—Ç—Ä–∞—Ñ –∑–∞ –æ—à–∏–±–∫—É
      score -= 50;
      if (score < 0) score = 0;
      scoreValue.textContent = score;
      
      // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ—à–∏–±–∫–∏
      gameScene.classList.add('wrong-choice');
      setTimeout(() => gameScene.classList.remove('wrong-choice'), 500);
      
      // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ö–∞–æ—Å –ø—Ä–∏ –æ—à–∏–±–∫–µ
      updateChaos(true);
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ—Å—Ç–∏–≥ –ª–∏ —Ö–∞–æ—Å –º–∞–∫—Å–∏–º—É–º–∞
      if (chaosLevel >= 100) {
        endGame(false);
      }
    }
  }
  
  function endGame(victory) {
    isGameOver = true;
    buttonsContainer.innerHTML = '';
    
    if (victory) {
      sceneTitle.textContent = "üéÜ –ü–û–ë–ï–î–ê! üéÜ";
      sceneDescription.textContent = `–í—ã –ø—Ä–æ—à–ª–∏ —á–µ—Ä–µ–∑ –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è —Ö–∞–æ—Å–∞ –∏ –≤—ã—à–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º! –í–∞—à–∏ –±–∞–ª–ª—ã: ${score}`;
      showAlert(`‚≠ê –í–´ –ü–û–ö–û–†–ò–õ–ò –•–ê–û–°! –ë–ê–õ–õ–´: ${score} ‚≠ê`, 5000);
      
      // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∑–∞ –ø–æ–±–µ–¥—É
      if (!achievements.entropyWinner) {
        achievements.entropyWinner = true;
        achievementElements[2].classList.remove('locked');
        achievementElements[2].classList.add('unlocked');
        achievementElements[2].textContent = '‚úÖ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å —ç–Ω—Ç—Ä–æ–ø–∏–∏';
      }
    } else {
      sceneTitle.textContent = "üíÄ –•–ê–û–° –ü–û–ë–ï–î–ò–õ üíÄ";
      sceneDescription.textContent = `–≠–Ω—Ç—Ä–æ–ø–∏—è –ø–æ–≥–ª–æ—Ç–∏–ª–∞ –≤–∞—Å. –†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–∞–ª–∞—Å—å –Ω–∞ —á–∞—Å—Ç–∏—Ü—ã. –í–∞—à–∏ –±–∞–ª–ª—ã: ${score}`;
      showAlert(`‚ò†Ô∏è –í–´ –ü–û–ì–õ–û–©–ï–ù–´ –≠–ù–¢–†–û–ü–ò–ï–ô! –ë–ê–õ–õ–´: ${score} ‚ò†Ô∏è`, 5000);
    }
    
    const restartButton = document.createElement('button');
    restartButton.className = 'slide-button';
    restartButton.textContent = 'üîÑ –ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û';
    restartButton.onclick = () => location.reload();
    buttonsContainer.appendChild(restartButton);
  }
  
  // –¢–ê–ô–ú–ï–† –•–ê–û–°–ê
  setInterval(() => {
    if (!isGameOver && !isChaosPaused) {
      timeElapsed++;
      timeValue.textContent = timeElapsed;
      
      // –ö–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ö–∞–æ—Å
      if (timeElapsed % 15 === 0) {
        updateChaos(true);
      }
      
      // –ö–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã —Å–æ–∑–¥–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã
      if (timeElapsed % 3 === 0) {
        createParticles();
      }
    }
  }, 1000);
  
  // –ë–ï–°–ö–û–ù–ï–ß–ù–´–ï –ß–ê–°–¢–ò–¶–´
  setInterval(() => {
    if (!isGameOver) {
      createParticles();
    }
  }, 500);
  
  // –°–¢–ê–†–¢ –ò–ì–†–´!
  initializePowers();
  loadScene(0);
  showAlert('‚ö†Ô∏è –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –•–ê–û–°! –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! ‚ö†Ô∏è', 3000);
</script>
</body>
</html>
