<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–•–†–û–ù–ò–ö–ò –•–ê–û–°–ê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #FFF;
            overflow: hidden;
            height: 100vh;
            touch-action: manipulation;
        }
        
        #game-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 5px;
            position: relative;
            background: linear-gradient(45deg, #000, #111, #000);
        }
        
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        #stats-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            gap: 3px;
        }
        
        .stat-item {
            font-size: 10px;
            padding: 4px 6px;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid;
            flex: 1;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        #timer { border-color: #0F0; color: #0F0; }
        #chaos-meter { border-color: #F00; color: #F00; }
        #score-display { border-color: #0FF; color: #0FF; }
        
        .stat-value {
            font-size: 12px;
            font-weight: bold;
        }
        
        /* –ò–≥—Ä–æ–≤–∞—è —Å—Ü–µ–Ω–∞ */
        #game-scene {
            flex: 1;
            background: rgba(255, 100, 50, 0.05);
            border: 1px solid #F50;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 5px;
            position: relative;
            box-shadow: 0 0 10px rgba(255, 80, 0, 0.3);
        }
        
        #scene-content {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        #scene-title {
            font-size: 14px;
            font-weight: bold;
            color: #FD0;
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 0 0 5px #FD0;
        }
        
        .scene-description {
            font-size: 11px;
            color: #FA0;
            text-align: center;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.3;
            padding: 0 5px;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ */
        #buttons-container {
            display: flex;
            flex-direction: column;
            gap: 4px;
            max-height: 35vh;
            overflow-y: auto;
        }
        
        .slide-button {
            padding: 8px 6px;
            font-size: 11px;
            background: linear-gradient(45deg, #F00, #F50, #FD0);
            border: 1px solid #FFF;
            color: #000;
            border-radius: 6px;
            cursor: pointer;
            min-height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-weight: bold;
            transition: transform 0.1s;
        }
        
        .slide-button:active {
            transform: scale(0.98);
        }
        
        /* –°–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ */
        #powers-container {
            position: absolute;
            bottom: 5px;
            left: 5px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .power-button {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #FFF;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.8);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .power-button:active {
            transform: scale(0.9);
        }
        
        .power-count {
            position: absolute;
            bottom: -2px;
            right: -2px;
            background: #F00;
            color: #FFF;
            border-radius: 50%;
            width: 12px;
            height: 12px;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #000;
            font-weight: bold;
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        #progress-container {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0, 0, 0, 0.8);
            padding: 4px;
            border-radius: 6px;
            border: 1px solid #FD0;
            font-size: 9px;
            backdrop-filter: blur(5px);
        }
        
        .progress-item {
            color: #FD0;
            margin: 1px 0;
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        #alert-element {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #F00;
            border-radius: 6px;
            padding: 6px 8px;
            text-align: center;
            width: 95%;
            backdrop-filter: blur(5px);
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç—ã —á–∞—Å—Ç–∏—Ü */
        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #FD0;
            border-radius: 50%;
            pointer-events: none;
            animation: float 2s forwards;
        }
        
        @keyframes float {
            to {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-height: 600px) {
            .slide-button {
                min-height: 30px;
                font-size: 10px;
                padding: 6px 4px;
            }
            
            .scene-description {
                font-size: 10px;
            }
            
            #scene-title {
                font-size: 12px;
            }
            
            #powers-container {
                bottom: 3px;
                left: 3px;
            }
            
            .power-button {
                width: 25px;
                height: 25px;
                font-size: 10px;
            }
        }
        
        /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
        @media (orientation: landscape) and (max-height: 400px) {
            #game-container {
                flex-direction: row;
                padding: 3px;
            }
            
            #stats-container {
                flex-direction: column;
                width: 80px;
                margin-bottom: 0;
                margin-right: 3px;
            }
            
            #game-scene {
                margin-bottom: 0;
                margin-right: 3px;
            }
            
            #alert-element {
                bottom: 3px;
                font-size: 9px;
                padding: 4px 6px;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="stats-container">
            <div id="timer" class="stat-item">
                ‚è±Ô∏è <div class="stat-value" id="time-value">0</div>
            </div>
            <div id="chaos-meter" class="stat-item">
                üî• <div class="stat-value" id="chaos-value">0%</div>
            </div>
            <div id="score-display" class="stat-item">
                üíÄ <div class="stat-value" id="score-value">0</div>
            </div>
        </div>
        
        <div id="game-scene">
            <div id="scene-content">
                <div id="scene-title">üåÄ –ù–ê–ß–ê–õ–û –ö–û–ù–¶–ê</div>
                <div id="scene-description" class="scene-description"></div>
                <div id="buttons-container"></div>
            </div>
        </div>
        
        <div id="alert-element">‚ö†Ô∏è –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! ‚ö†Ô∏è</div>
        
        <div id="powers-container">
            <div class="power-button" id="hint-power">
                üí°
                <div class="power-count" id="hint-count">3</div>
            </div>
            <div class="power-button" id="slow-power">
                ‚è≥
                <div class="power-count" id="slow-count">2</div>
            </div>
            <div class="power-button" id="shield-power">
                üõ°Ô∏è
                <div class="power-count" id="shield-count">2</div>
            </div>
        </div>
        
        <div id="progress-container">
            <div class="progress-item">–°–¶–ï–ù–ê: <span id="scene-number">1</span>/10</div>
            <div class="progress-item">–£–†–û–í–ï–ù–¨: <span id="difficulty-level">1</span></div>
        </div>
    </div>

    <script>
        // –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò–ì–†–´
        let currentScene = 1;
        let chaosLevel = 0;
        let score = 0;
        let timeElapsed = 0;
        let isGameOver = false;
        let difficultyLevel = 1;
        let comboCount = 0;
        let comboMultiplier = 1;
        let isShieldActive = false;
        let isTimeSlowed = false;
        
        // –°–ü–û–°–û–ë–ù–û–°–¢–ò
        let powers = {
            hint: { count: 3, element: null },
            slow: { count: 2, element: null },
            shield: { count: 2, element: null }
        };
        
        // –°–¶–ï–ù–´
        const scenes = [
            {
                id: 1,
                title: "üåÄ –ù–ê–ß–ê–õ–û –ö–û–ù–¶–ê",
                description: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å–ø–∞–¥–∞—Ç—å—Å—è. –í–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—è—Ç –≤—Å—ë.",
                choices: ["üö™ –í–æ–π—Ç–∏ –≤ –ø–æ—Ä—Ç–∞–ª", "üèÉ –ë–µ–∂–∞—Ç—å –æ—Ç —Å—É–¥—å–±—ã", "üíÄ –ü—Ä–∏–Ω—è—Ç—å —Ö–∞–æ—Å"],
                correctIndex: 2,
                messages: ["–¢—Ä—É—Å–æ—Å—Ç—å –Ω–µ —Å–ø–∞—Å—ë—Ç!", "–°—É–¥—å–±–∞ –Ω–∞—Å—Ç–∏–≥–Ω–µ—Ç!", "–í–´ –ü–†–ò–ù–Ø–õ–ò –•–ê–û–°!"],
                chaosIncrease: 8
            },
            {
                id: 2,
                title: "üëÅÔ∏è –ë–ï–ó–î–ù–ê –í–û–ü–ò–¢",
                description: "–ë–µ–∑–¥–Ω–∞ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤–∞—Å. –®—ë–ø–æ—Ç –∑–∞–±—ã—Ç—ã—Ö –º–∏—Ä–æ–≤ –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ —Å–æ–∑–Ω–∞–Ω–∏–µ.",
                choices: ["üëÅÔ∏è –°–º–æ—Ç—Ä–µ—Ç—å –≤ –±–µ–∑–¥–Ω—É", "üî• –°–∂–µ—á—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å", "‚ùÑÔ∏è –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –≤—Ä–µ–º—è"],
                correctIndex: 0,
                messages: ["–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–æ—è–ª–∞!", "–í—Ä–µ–º—è –Ω–µ –ø–æ–¥–≤–ª–∞—Å—Ç–Ω–æ!", "–ë–ï–ó–î–ù–ê –°–ú–û–¢–†–ò–¢ –ù–ê–ó–ê–î!"],
                chaosIncrease: 10
            },
            {
                id: 3,
                title: "üíÉ –¢–ê–ù–ï–¶ –≠–ù–¢–†–û–ü–ò–ò",
                description: "–í—Å–µ–ª–µ–Ω–Ω–∞—è —Ç–∞–Ω—Ü—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∞–Ω–µ—Ü. –ß–∞—Å—Ç–∏—Ü—ã –º–∞—Ç–µ—Ä–∏–∏ —Ä–∞—Å–ø–∞–¥–∞—é—Ç—Å—è.",
                choices: ["üíÉ –¢–∞–Ω—Ü–µ–≤–∞—Ç—å —Å —Ö–∞–æ—Å–æ–º", "‚ö° –°—Ç–∞—Ç—å –º–æ–ª–Ω–∏–µ–π", "üåä –£—Ç–æ–Ω—É—Ç—å –≤ –≤–æ–ª–Ω–∞—Ö"],
                correctIndex: 0,
                messages: ["–ú–æ–ª–Ω–∏—è —É–¥–∞—Ä–∏–ª–∞!", "–í–æ–ª–Ω—ã –ø–æ–≥–ª–æ—Ç–∏–ª–∏!", "–í–´ –°–¢–ê–õ–ò –•–ê–û–°–û–ú!"],
                chaosIncrease: 12
            },
            {
                id: 4,
                title: "üé≠ –≠–•–û –†–ê–ó–†–£–®–ï–ù–ò–Ø",
                description: "–í–∞—à–∏ —Ä–µ—à–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç –Ω–æ–≤—ã–µ –º–∏—Ä—ã –∏ —É–Ω–∏—á—Ç–æ–∂–∞—é—Ç —Å—Ç–∞—Ä—ã–µ.",
                choices: ["üé≠ –°–Ω—è—Ç—å –º–∞—Å–∫—É", "üé™ –í–æ–π—Ç–∏ –≤ —Ü–∏—Ä–∫", "üé® –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥"],
                correctIndex: 2,
                messages: ["–õ–∏—Ü–æ —Ä–∞—Å—Ç–≤–æ—Ä–∏–ª–æ—Å—å!", "–¶–∏—Ä–∫ –Ω–µ –æ—Ç–ø—É—Å–∫–∞–µ—Ç!", "–í–´–•–û–î –°–û–ó–î–ê–ù!"],
                chaosIncrease: 14
            },
            {
                id: 5,
                title: "üåë –ó–ê–¢–ú–ï–ù–ò–ï –†–ê–ó–£–ú–ê",
                description: "–¢—å–º–∞ –æ–∫—É—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑—É–º. –¢–µ–Ω–∏ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –±—É–¥—É—â–µ–≥–æ —Å–ª–∏–≤–∞—é—Ç—Å—è.",
                choices: ["üïØÔ∏è –ó–∞–∂–µ—á—å —Å–≤–µ—á—É", "üåÖ –í—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ä–∞—Å—Å–≤–µ—Ç", "üåå –ü–æ–≥—Ä—É–∑–∏—Ç—å—Å—è –≤–æ —Ç—å–º—É"],
                correctIndex: 1,
                messages: ["–°–≤–µ—á–∞ –ø–æ–≥–∞—Å–ª–∞!", "–¢—å–º–∞ –ø–æ–≥–ª–æ—Ç–∏–ª–∞!", "–†–ê–°–°–í–ï–¢ –ü–û–ë–ï–î–ò–õ!"],
                chaosIncrease: 16
            },
            {
                id: 6,
                title: "‚ö° –ë–£–†–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô",
                description: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ä–≤—ë—Ç—Å—è –≤ —à—Ç–æ—Ä–º–µ. –ö–∞–∂–¥–∞—è –º–æ–ª–Ω–∏—è —Ä–æ–∂–¥–∞–µ—Ç –≤—Å–µ–ª–µ–Ω–Ω—É—é.",
                choices: ["‚ö° –õ–æ–≤–∏—Ç—å –º–æ–ª–Ω–∏–∏", "üåÄ –í–æ–π—Ç–∏ –≤ —ç–ø–∏—Ü–µ–Ω—Ç—Ä", "üõ°Ô∏è –£–∫—Ä—ã—Ç—å—Å—è –æ—Ç –±—É—Ä–∏"],
                correctIndex: 1,
                messages: ["–ú–æ–ª–Ω–∏–∏ —Å–æ–∂–≥–ª–∏!", "–£–∫—Ä—ã—Ç–∏–µ —Ä—É—Ö–Ω—É–ª–æ!", "–í –¶–ï–ù–¢–†–ï –ë–£–†–ò!"],
                chaosIncrease: 18
            },
            {
                id: 7,
                title: "üîÆ –ö–†–ò–°–¢–ê–õ–õ –°–£–î–ï–ë",
                description: "–í –∫—Ä–∏—Å—Ç–∞–ª–ª–µ - –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—É–¥—å–±—ã.",
                choices: ["üîÆ –ó–∞–≥–ª—è–Ω—É—Ç—å –≤ –∫—Ä–∏—Å—Ç–∞–ª–ª", "üíé –†–∞–∑–±–∏—Ç—å –∏–ª–ª—é–∑–∏–∏", "üåà –ü–æ–π–º–∞—Ç—å –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ"],
                correctIndex: 0,
                messages: ["–ò–ª–ª—é–∑–∏–∏ —Ä–∞–∑–±–∏–ª–∏—Å—å!", "–û—Ç—Ä–∞–∂–µ–Ω–∏–µ —É—à–ª–æ!", "–í–ò–î–ò–®–¨ –í–°–ï –°–£–î–¨–ë–´!"],
                chaosIncrease: 20
            },
            {
                id: 8,
                title: "üåã –ò–ó–í–ï–†–ñ–ï–ù–ò–ï –•–ê–û–°–ê",
                description: "–•–∞–æ—Å –∏–∑–≤–µ—Ä–≥–∞–µ—Ç—Å—è –∏–∑ –Ω–µ–¥—Ä, —É–≥—Ä–æ–∂–∞—è –ø–æ–≥–ª–æ—Ç–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫.",
                choices: ["üåã –ë—Ä–æ—Å–∏—Ç—å—Å—è –≤ –∂–µ—Ä–ª–æ", "üèîÔ∏è –í–∑–æ–±—Ä–∞—Ç—å—Å—è –Ω–∞ –ø–∏–∫", "üåä –ü–µ—Ä–µ–ø–ª—ã—Ç—å –ª–∞–≤—É"],
                correctIndex: 1,
                messages: ["–ñ–µ—Ä–ª–æ –ø–æ–≥–ª–æ—Ç–∏–ª–æ!", "–õ–∞–≤–∞ —Å–æ–∂–≥–ª–∞!", "–ù–ê–î –•–ê–û–°–û–ú!"],
                chaosIncrease: 22
            },
            {
                id: 9,
                title: "‚≠ê –†–û–ñ–î–ï–ù–ò–ï –°–í–ï–†–•–ù–û–í–û–ô",
                description: "–≠–ø–∏—Ü–µ–Ω—Ç—Ä –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –≤–∑—Ä—ã–≤–∞. –ó–≤—ë–∑–¥—ã —Ä–æ–∂–¥–∞—é—Ç—Å—è –∏ —É–º–∏—Ä–∞—é—Ç.",
                choices: ["‚≠ê –°—Ç–∞—Ç—å —Å–≤–µ—Ä—Ö–Ω–æ–≤–æ–π", "üå† –ò—Å–ø—É—Å—Ç–∏—Ç—å —Å–≤–µ—Ç", "üí• –í–∑–æ—Ä–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ"],
                correctIndex: 0,
                messages: ["–°–≤–µ—Ç –ø–æ–≥–∞—Å!", "–í–∑—Ä—ã–≤ –ø–æ–≥–ª–æ—Ç–∏–ª!", "–°–í–ï–†–•–ù–û–í–ê–Ø!"],
                chaosIncrease: 24
            },
            {
                id: 10,
                title: "‚ôæÔ∏è –ë–ï–°–ö–û–ù–ï–ß–ù–ê–Ø –ü–ï–¢–õ–Ø",
                description: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–º—ã–∫–∞–µ—Ç—Å—è. –ö–∞–∂–¥—ã–π –≤—ã–±–æ—Ä –≤–µ–¥—ë—Ç –∫ –Ω–∞—á–∞–ª—É.",
                choices: ["‚ôæÔ∏è –í–æ–π—Ç–∏ –≤ –ø–µ—Ç–ª—é", "‚è© –£—Å–∫–æ—Ä–∏—Ç—å –≤—Ä–µ–º—è", "‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë"],
                correctIndex: 2,
                messages: ["–ü–µ—Ç–ª—è –∑–∞—Ç—è–Ω—É–ª–∞!", "–í—Ä–µ–º—è —É—Å–∫–æ—Ä–∏–ª–æ—Å—å!", "–í–°–Å –û–°–¢–ê–ù–û–í–õ–ï–ù–û!"],
                chaosIncrease: 26
            }
        ];

        // –≠–õ–ï–ú–ï–ù–¢–´ –î–û–ú
        const sceneTitle = document.getElementById('scene-title');
        const sceneDescription = document.getElementById('scene-description');
        const buttonsContainer = document.getElementById('buttons-container');
        const alertElement = document.getElementById('alert-element');
        const chaosValue = document.getElementById('chaos-value');
        const scoreValue = document.getElementById('score-value');
        const timeValue = document.getElementById('time-value');
        const sceneNumber = document.getElementById('scene-number');
        const difficultyLevelElement = document.getElementById('difficulty-level');

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
        function initializeGame() {
            initializePowers();
            loadScene(0);
            startGameLoop();
            showAlert('üåÄ –•–ê–û–° –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø! –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! üåÄ', 2500);
        }

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô
        function initializePowers() {
            powers.hint.element = document.getElementById('hint-power');
            powers.slow.element = document.getElementById('slow-power');
            powers.shield.element = document.getElementById('shield-power');
            
            powers.hint.element.addEventListener('click', () => usePower('hint'));
            powers.slow.element.addEventListener('click', () => usePower('slow'));
            powers.shield.element.addEventListener('click', () => usePower('shield'));
        }
        
        // –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–ü–û–°–û–ë–ù–û–°–¢–ï–ô
        function usePower(powerType) {
            if (powers[powerType].count <= 0 || isGameOver) return;
            
            powers[powerType].count--;
            document.getElementById(powerType + '-count').textContent = powers[powerType].count;
            
            switch(powerType) {
                case 'hint':
                    useHintPower();
                    break;
                case 'slow':
                    useSlowPower();
                    break;
                case 'shield':
                    useShieldPower();
                    break;
            }
            
            // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫
            if (navigator.vibrate) navigator.vibrate(30);
        }
        
        function useHintPower() {
            const scene = scenes[currentScene - 1];
            const buttons = buttonsContainer.querySelectorAll('.slide-button');
            buttons[scene.correctIndex].style.background = '#0F0';
            buttons[scene.correctIndex].style.color = '#000';
            showAlert('üí° –ü–û–î–°–ö–ê–ó–ö–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê!', 1500);
            createParticles(10);
            setTimeout(() => {
                if (!isGameOver) {
                    buttons[scene.correctIndex].style.background = '';
                    buttons[scene.correctIndex].style.color = '#000';
                }
            }, 5000);
        }
        
        function useSlowPower() {
            isTimeSlowed = true;
            showAlert('‚è≥ –í–†–ï–ú–Ø –ó–ê–ú–ï–î–õ–ï–ù–û –ù–ê 10–°!', 1500);
            createParticles(15);
            setTimeout(() => {
                isTimeSlowed = false;
                if (!isGameOver) showAlert('‚è∞ –í–†–ï–ú–Ø –í–û–ó–û–ë–ù–û–í–õ–ï–ù–û!', 1000);
            }, 10000);
        }
        
        function useShieldPower() {
            isShieldActive = true;
            showAlert('üõ°Ô∏è –©–ò–¢ –ê–ö–¢–ò–í–ï–ù –ù–ê 8–°!', 1500);
            createParticles(12);
            setTimeout(() => {
                isShieldActive = false;
                if (!isGameOver) showAlert('üõ°Ô∏è –©–ò–¢ –û–¢–ö–õ–Æ–ß–Å–ù!', 1000);
            }, 8000);
        }

        // –°–ò–°–¢–ï–ú–ê –•–ê–û–°–ê
        function updateChaos(increase = true, amount = null) {
            if (isShieldActive && increase) return;
            
            const baseAmount = amount || (10 - difficultyLevel);
            
            if (increase) {
                chaosLevel = Math.min(100, chaosLevel + baseAmount);
                if (chaosLevel >= 100 && !isGameOver) endGame(false);
            } else {
                chaosLevel = Math.max(0, chaosLevel - baseAmount);
            }
            
            chaosValue.textContent = chaosLevel + '%';
            updateDifficulty();
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ö–∞–æ—Å–∞
            if (chaosLevel > 50) {
                document.getElementById('game-scene').style.borderColor = '#F00';
                document.getElementById('game-scene').style.boxShadow = '0 0 15px rgba(255, 0, 0, 0.5)';
            } else {
                document.getElementById('game-scene').style.borderColor = '#F50';
                document.getElementById('game-scene').style.boxShadow = '0 0 10px rgba(255, 80, 0, 0.3)';
            }
        }

        function updateDifficulty() {
            const newLevel = Math.floor(chaosLevel / 20) + 1;
            if (newLevel !== difficultyLevel) {
                difficultyLevel = newLevel;
                difficultyLevelElement.textContent = difficultyLevel;
                showAlert(`üìà –£–†–û–í–ï–ù–¨ ${difficultyLevel}!`, 1500);
                createParticles(8);
            }
        }

        // –°–ò–°–¢–ï–ú–ê –ö–û–ú–ë–û
        function updateCombo(isCorrect) {
            if (isCorrect) {
                comboCount++;
                comboMultiplier = Math.min(5, Math.floor(comboCount / 2) + 1);
                if (comboCount >= 2) {
                    showAlert(`üî• –ö–û–ú–ë–û x${comboMultiplier}!`, 1000);
                    createParticles(20);
                }
            } else {
                comboCount = 0;
                comboMultiplier = 1;
            }
        }

        // –°–ò–°–¢–ï–ú–ê –°–¶–ï–ù
        function loadScene(sceneIndex) {
            if (sceneIndex >= scenes.length) {
                endGame(true);
                return;
            }
            
            const scene = scenes[sceneIndex];
            sceneTitle.textContent = scene.title;
            sceneDescription.textContent = scene.description;
            buttonsContainer.innerHTML = '';
            
            scene.choices.forEach((choice, index) => {
                const button = document.createElement('button');
                button.className = 'slide-button';
                button.textContent = choice;
                button.onclick = () => makeChoice(index, scene);
                buttonsContainer.appendChild(button);
            });
            
            currentScene = sceneIndex + 1;
            sceneNumber.textContent = currentScene;
            updateChaos(true, scene.chaosIncrease);
            createParticles(5);
        }

        // –°–û–ó–î–ê–ù–ò–ï –ß–ê–°–¢–ò–¶
        function createParticles(count) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.background = `hsl(${Math.random() * 60 + 30}, 100%, 50%)`;
                    document.getElementById('game-container').appendChild(particle);
                    setTimeout(() => particle.remove(), 2000);
                }, i * 50);
            }
        }

        // –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
        function showAlert(message, duration = 1500) {
            alertElement.textContent = message;
            alertElement.style.borderColor = message.includes('üí°') ? '#0F0' : 
                                          message.includes('‚è≥') ? '#0FF' :
                                          message.includes('üõ°Ô∏è') ? '#FF0' :
                                          message.includes('üî•') ? '#F80' : '#F00';
            setTimeout(() => {
                if (!isGameOver) {
                    alertElement.textContent = '‚ö†Ô∏è –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! ‚ö†Ô∏è';
                    alertElement.style.borderColor = '#F00';
                }
            }, duration);
        }

        // –í–´–ë–û–† –ò–ì–†–û–ö–ê
        function makeChoice(choiceIndex, scene) {
            if (isGameOver) return;
            
            const isCorrect = choiceIndex === scene.correctIndex;
            updateCombo(isCorrect);
            
            showAlert('‚ö†Ô∏è ' + scene.messages[choiceIndex] + ' ‚ö†Ô∏è');
            
            // –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫
            if (navigator.vibrate) {
                navigator.vibrate(isCorrect ? [50, 50, 50] : [200]);
            }
            
            if (isCorrect) {
                // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤
                const basePoints = 100;
                const chaosBonus = Math.floor(chaosLevel * 2);
                const comboBonus = comboMultiplier > 1 ? (basePoints * (comboMultiplier - 1)) : 0;
                const pointsEarned = basePoints + chaosBonus + comboBonus;
                
                score += pointsEarned;
                scoreValue.textContent = score;
                
                // –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ö–∞–æ—Å–∞
                updateChaos(false, 15);
                
                // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ü–µ–Ω–µ
                setTimeout(() => loadScene(currentScene), 1200);
                
                // –≠—Ñ—Ñ–µ–∫—Ç—ã —É—Å–ø–µ—Ö–∞
                createParticles(15);
                
                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
                if (Math.random() > 0.6) {
                    const powerTypes = Object.keys(powers);
                    const randomPower = powerTypes[Math.floor(Math.random() * powerTypes.length)];
                    if (powers[randomPower].count < 3) {
                        powers[randomPower].count++;
                        document.getElementById(randomPower + '-count').textContent = powers[randomPower].count;
                        showAlert(`‚ú® ${randomPower === 'hint' ? 'üí°' : randomPower === 'slow' ? '‚è≥' : 'üõ°Ô∏è'} –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–û!`, 1500);
                    }
                }
            } else {
                // –®—Ç—Ä–∞—Ñ –∑–∞ –æ—à–∏–±–∫—É
                score = Math.max(0, score - 50);
                scoreValue.textContent = score;
                updateChaos(true, scene.chaosIncrease);
            }
        }

        // –ö–û–ù–ï–¶ –ò–ì–†–´
        function endGame(victory) {
            isGameOver = true;
            buttonsContainer.innerHTML = '';
            
            if (victory) {
                sceneTitle.textContent = "üéÜ –ü–û–ë–ï–î–ê –ù–ê–î –•–ê–û–°–û–ú!";
                sceneDescription.textContent = `–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∏ –≤—ã—à–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º! –í–∞—à–∏ –æ—á–∫–∏: ${score}`;
                showAlert(`‚≠ê –í–´ –ü–û–ë–ï–î–ò–õ–ò! –û–ß–ö–ò: ${score} ‚≠ê`, 0);
                createParticles(30);
            } else {
                sceneTitle.textContent = "üíÄ –•–ê–û–° –ü–û–ë–ï–î–ò–õ";
                sceneDescription.textContent = `–≠–Ω—Ç—Ä–æ–ø–∏—è –ø–æ–≥–ª–æ—Ç–∏–ª–∞ –≤–∞—Å. –†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–∞–ª–∞—Å—å. –û—á–∫–∏: ${score}`;
                showAlert(`‚ò†Ô∏è –í–ê–° –ü–û–ì–õ–û–¢–ò–õ –•–ê–û–°! –û–ß–ö–ò: ${score} ‚ò†Ô∏è`, 0);
            }
            
            const restartButton = document.createElement('button');
            restartButton.className = 'slide-button';
            restartButton.textContent = 'üîÑ –ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û';
            restartButton.onclick = () => location.reload();
            buttonsContainer.appendChild(restartButton);
        }

        // –ò–ì–†–û–í–û–ô –¶–ò–ö–õ
        function startGameLoop() {
            setInterval(() => {
                if (!isGameOver && !isTimeSlowed) {
                    timeElapsed++;
                    timeValue.textContent = timeElapsed;
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ö–∞–æ—Å–∞
                    if (timeElapsed % (20 - difficultyLevel * 2) === 0) {
                        updateChaos(true, 2);
                    }
                    
                    // –°–ª—É—á–∞–π–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã
                    if (timeElapsed % 5 === 0 && chaosLevel > 30) {
                        createParticles(2);
                    }
                }
            }, 1000);
        }

        // –ó–ê–ü–£–°–ö –ò–ì–†–´
        initializeGame();
    </script>
</body>
</html>
