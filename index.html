<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–•–†–û–ù–ò–ö–ò –¢–†–ê–ì–ï–î–ò–ò –°–õ–ê–ô–î–û–í</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }
  
  body {
    font-family: 'Courier New', monospace;
    background: linear-gradient(45deg, #000000, #1a0033, #330033, #000000);
    background-size: 400% 400%;
    animation: chaosGradient 5s ease infinite;
    color: #FFFFFF;
    overflow: hidden;
    height: 100vh;
    touch-action: manipulation;
  }
  
  @keyframes chaosGradient {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  #game-container {
    width: 100%;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    padding: 10px;
  }
  
  #stats-container {
    display: flex;
    justify-content: space-between;
    width: 100%;
    max-width: 800px;
    margin-bottom: 10px;
  }
  
  #timer {
    font-size: 24px;
    font-weight: bold;
    color: #00FF00;
    text-shadow: 0 0 10px #00FF00;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 10px;
    border-radius: 10px;
  }
  
  #chaos-meter {
    font-size: 20px;
    font-weight: bold;
    color: #FF0000;
    text-shadow: 0 0 10px #FF0000;
    animation: pulse 0.5s infinite;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 10px;
    border-radius: 10px;
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  
  #score-display {
    font-size: 20px;
    color: #00FFFF;
    text-shadow: 0 0 10px #00FFFF;
    background: rgba(0, 0, 0, 0.5);
    padding: 5px 10px;
    border-radius: 10px;
  }
  
  #game-scene {
    width: 100%;
    max-width: 800px;
    height: 60vh;
    min-height: 400px;
    background: rgba(247, 215, 212, 0.1);
    border: 2px solid #FF5D2E;
    box-shadow: 0 0 20px rgba(255, 93, 46, 0.8), inset 0 0 30px rgba(0, 0, 0, 0.5);
    padding: 15px;
    position: relative;
    overflow: hidden;
    animation: sceneShake 0.3s infinite;
    border-radius: 10px;
  }
  
  @keyframes sceneShake {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(-1px, 1px) rotate(-0.3deg); }
    50% { transform: translate(1px, -1px) rotate(0.3deg); }
    75% { transform: translate(-1px, -1px) rotate(-0.3deg); }
  }
  
  #scene-content {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  #scene-title {
    font-size: 28px;
    font-weight: bold;
    color: #FFD700;
    text-shadow: 0 0 10px #FFD700, 0 0 20px #FF5D2E;
    margin-bottom: 15px;
    animation: titleGlitch 1s infinite;
    text-align: center;
  }
  
  @keyframes titleGlitch {
    0%, 90%, 100% { transform: translate(0, 0); }
    92% { transform: translate(-3px, 1px); }
    94% { transform: translate(3px, -1px); }
    96% { transform: translate(-2px, -2px); }
  }
  
  .scene-description {
    font-size: 16px;
    text-align: center;
    margin-bottom: 20px;
    max-width: 95%;
    line-height: 1.4;
    color: #FFA500;
    text-shadow: 0 0 5px #FFA500;
  }
  
  #buttons-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-height: 50%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding: 5px;
  }
  
  .slide-button {
    margin: 8px 0;
    padding: 15px 10px;
    font-size: 18px;
    font-weight: bold;
    background: linear-gradient(45deg, #FF0000, #FF5D2E, #FFD700);
    background-size: 200% 200%;
    border: 2px solid #FFFFFF;
    color: #000000;
    cursor: pointer;
    transition: all 0.3s;
    text-shadow: 0 0 5px #FFFFFF;
    animation: buttonPulse 2s infinite;
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    width: 100%;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
  }
  
  @keyframes buttonPulse {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .slide-button:active {
    transform: scale(0.95);
    box-shadow: 0 0 20px #FF5D2E;
  }
  
  #alert-element {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 18px;
    font-weight: bold;
    color: #FF0000;
    text-shadow: 0 0 5px #FF0000, 0 0 10px #FFFFFF;
    text-align: center;
    animation: alertBlink 0.5s infinite;
    padding: 10px 15px;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid #FF0000;
    border-radius: 8px;
    width: 95%;
    max-width: 500px;
  }
  
  @keyframes alertBlink {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0.3; }
  }
  
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #FFD700;
    border-radius: 50%;
    pointer-events: none;
    animation: particleFloat 2s infinite;
  }
  
  @keyframes particleFloat {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-300px) scale(0); opacity: 0; }
  }
  
  .wrong-choice {
    animation: wrongShake 0.5s;
  }
  
  @keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
  }
  
  .choice-feedback {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 24px;
    font-weight: bold;
    padding: 15px 25px;
    border-radius: 8px;
    z-index: 100;
    animation: feedbackPulse 1s;
    text-align: center;
    width: 80%;
  }
  
  @keyframes feedbackPulse {
    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
    50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  }
  
  .correct-feedback {
    background: rgba(0, 255, 0, 0.8);
    color: #000;
    border: 2px solid #00FF00;
  }
  
  .wrong-feedback {
    background: rgba(255, 0, 0, 0.8);
    color: #FFF;
    border: 2px solid #FF0000;
  }
  
  #achievements {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    padding: 8px;
    border-radius: 8px;
    border: 1px solid #FFD700;
    max-width: 150px;
    display: none; /* –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
  }
  
  .achievement {
    font-size: 12px;
    margin: 3px 0;
    color: #FFD700;
  }
  
  .achievement.unlocked {
    text-shadow: 0 0 3px #FFD700;
  }
  
  .achievement.locked {
    color: #666;
  }
  
  #chaos-visual {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
  }
  
  .chaos-element {
    position: absolute;
    opacity: 0;
    animation: chaosElement 3s infinite;
  }
  
  @keyframes chaosElement {
    0%, 100% { opacity: 0; transform: scale(0.5) rotate(0deg); }
    50% { opacity: 0.2; transform: scale(1) rotate(180deg); }
  }
  
  /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
  @media (max-height: 700px) {
    #game-scene {
      height: 55vh;
      min-height: 350px;
    }
    
    .scene-description {
      font-size: 14px;
      margin-bottom: 15px;
    }
    
    .slide-button {
      padding: 12px 8px;
      font-size: 16px;
      min-height: 50px;
    }
    
    #scene-title {
      font-size: 24px;
      margin-bottom: 10px;
    }
  }
  
  @media (max-width: 350px) {
    #stats-container {
      flex-wrap: wrap;
      justify-content: center;
    }
    
    #timer, #chaos-meter, #score-display {
      margin: 2px;
      font-size: 16px;
    }
    
    #scene-title {
      font-size: 22px;
    }
    
    .scene-description {
      font-size: 14px;
    }
    
    .slide-button {
      font-size: 16px;
      min-height: 45px;
    }
  }
  
  /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è */
  @media (max-height: 500px) and (orientation: landscape) {
    #game-container {
      flex-direction: row;
      padding: 5px;
    }
    
    #stats-container {
      flex-direction: column;
      width: auto;
      margin-bottom: 0;
      margin-right: 10px;
    }
    
    #game-scene {
      height: 95vh;
      width: 70%;
    }
    
    #timer, #chaos-meter, #score-display {
      margin-bottom: 10px;
      font-size: 16px;
    }
    
    #alert-element {
      bottom: 5px;
      font-size: 16px;
    }
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="stats-container">
    <div id="timer">‚è±Ô∏è <span id="time-value">0</span>—Å</div>
    <div id="chaos-meter">üî• –•–ê–û–°: <span id="chaos-value">0</span>%</div>
    <div id="score-display">üíÄ <span id="score-value">0</span></div>
  </div>
  
  <div id="game-scene">
    <div id="scene-content">
      <div id="scene-title">–ù–ê–ß–ê–õ–û –ö–û–ù–¶–ê</div>
      <div id="scene-description" class="scene-description"></div>
      <div id="buttons-container"></div>
    </div>
  </div>
  
  <div id="alert-element">‚ö†Ô∏è –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –•–ê–û–°! ‚ö†Ô∏è</div>
  
  <div id="achievements">
    <div class="achievement locked">üîí –ü–µ—Ä–≤—ã–π —à–∞–≥</div>
    <div class="achievement locked">üîí –ú–∞—Å—Ç–µ—Ä —Ö–∞–æ—Å–∞</div>
    <div class="achievement locked">üîí –ü–æ–±–µ–¥–∏—Ç–µ–ª—å —ç–Ω—Ç—Ä–æ–ø–∏–∏</div>
  </div>
  
  <div id="chaos-visual"></div>
</div>

<script>
  // –ü–ï–†–ï–ú–ï–ù–ù–´–ï –•–ê–û–°–ê
  let currentScene = 1;
  let chaosLevel = 0;
  let score = 0;
  let timeElapsed = 0;
  let isGameOver = false;
  let achievements = {
    firstStep: false,
    chaosMaster: false,
    entropyWinner: false
  };
  
  // –°–¶–ï–ù–´ –¢–†–ê–ì–ï–î–ò–ò
  const scenes = [
    {
      title: "–ù–ê–ß–ê–õ–û –ö–û–ù–¶–ê",
      description: "–í—ã —Å—Ç–æ–∏—Ç–µ –Ω–∞ –ø–æ—Ä–æ–≥–µ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, —á—É–≤—Å—Ç–≤—É—è, –∫–∞–∫ —Ç–∫–∞–Ω—å –±—ã—Ç–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å–ø–∞–¥–∞—Ç—å—Å—è. –í—Ä–µ–º—è –∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏—Å–∫–∞–∂–∞—é—Ç—Å—è –≤–æ–∫—Ä—É–≥ –≤–∞—Å.",
      choices: ["üö™ –í–æ–π—Ç–∏ –≤ –ø–æ—Ä—Ç–∞–ª", "üèÉ –£–±–µ–∂–∞—Ç—å –æ—Ç —Å—É–¥—å–±—ã", "üíÄ –ü—Ä–∏–Ω—è—Ç—å —Ö–∞–æ—Å"],
      correctIndex: 2,
      messages: ["–¢—Ä—É—Å–æ—Å—Ç—å –Ω–µ —Å–ø–∞—Å—ë—Ç!", "–°—É–¥—å–±–∞ –Ω–∞—Å—Ç–∏–≥–Ω–µ—Ç!", "–í–´ –ü–†–ò–ù–Ø–õ–ò –•–ê–û–°!"]
    },
    {
      title: "–ë–ï–ó–î–ù–ê –í–û–ü–ò–¢",
      description: "–ü–µ—Ä–µ–¥ –≤–∞–º–∏ —Ä–∞–∑–≤–µ—Ä–∑–ª–∞—Å—å –±–µ–∑–¥–Ω–∞, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —à–µ–ø–æ—Ç–æ–º –∑–∞–±—ã—Ç—ã—Ö –º–∏—Ä–æ–≤. –ï—ë –≥–æ–ª–æ—Å –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ —Å–∞–º–æ–µ —Å–æ–∑–Ω–∞–Ω–∏–µ.",
      choices: ["üëÅÔ∏è –°–º–æ—Ç—Ä–µ—Ç—å –≤ –±–µ–∑–¥–Ω—É", "üî• –°–∂–µ—á—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å", "‚ùÑÔ∏è –ó–∞–º–æ—Ä–æ–∑–∏—Ç—å –≤—Ä–µ–º—è"],
      correctIndex: 0,
      messages: ["–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–æ—è–ª–∞!", "–í—Ä–µ–º—è –Ω–µ –ø–æ–¥–≤–ª–∞—Å—Ç–Ω–æ!", "–ë–ï–ó–î–ù–ê –°–ú–û–¢–†–ò–¢ –ù–ê–ó–ê–î!"]
    },
    {
      title: "–¢–ê–ù–ï–¶ –≠–ù–¢–†–û–ü–ò–ò",
      description: "–í—Å–µ–ª–µ–Ω–Ω–∞—è —Ç–∞–Ω—Ü—É–µ—Ç —Å–≤–æ–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–∞–Ω–µ—Ü. –ß–∞—Å—Ç–∏—Ü—ã –º–∞—Ç–µ—Ä–∏–∏ —Ä–∞—Å–ø–∞–¥–∞—é—Ç—Å—è –≤ —Ä–∏—Ç–º–µ –≤—Å–µ–ª–µ–Ω—Å–∫–æ–π —Å–∏–º—Ñ–æ–Ω–∏–∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è.",
      choices: ["üíÉ –¢–∞–Ω—Ü–µ–≤–∞—Ç—å —Å —Ö–∞–æ—Å–æ–º", "‚ö° –°—Ç–∞—Ç—å –º–æ–ª–Ω–∏–µ–π", "üåä –£—Ç–æ–Ω—É—Ç—å –≤ –≤–æ–ª–Ω–∞—Ö"],
      correctIndex: 0,
      messages: ["–ú–æ–ª–Ω–∏—è —É–¥–∞—Ä–∏–ª–∞ –≤ –≤–∞—Å!", "–í–æ–ª–Ω—ã –ø–æ–≥–ª–æ—Ç–∏–ª–∏!", "–í–´ –°–¢–ê–õ–ò –•–ê–û–°–û–ú!"]
    },
    {
      title: "–≠–•–û –†–ê–ó–†–£–®–ï–ù–ò–Ø",
      description: "–û—Ç–≥–æ–ª–æ—Å–∫–∏ –≤–∞—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π —Ä–∞–∑–Ω–æ—Å—è—Ç—Å—è –ø–æ —Ä—É—à–∞—â–µ–π—Å—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏. –ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –º–∏—Ä—ã –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ.",
      choices: ["üé≠ –°–Ω—è—Ç—å –º–∞—Å–∫—É", "üé™ –í–æ–π—Ç–∏ –≤ —Ü–∏—Ä–∫", "üé® –ù–∞—Ä–∏—Å–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥"],
      correctIndex: 2,
      messages: ["–õ–∏—Ü–æ —Ä–∞—Å—Ç–≤–æ—Ä–∏–ª–æ—Å—å!", "–¶–∏—Ä–∫ –Ω–µ –æ—Ç–ø—É—Å–∫–∞–µ—Ç!", "–í–´–•–û–î –°–û–ó–î–ê–ù!"]
    },
    {
      title: "–§–ò–ù–ê–õ–¨–ù–´–ô –ö–û–õ–õ–ê–ü–°",
      description: "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Å–∂–∏–º–∞–µ—Ç—Å—è –≤ —Ç–æ—á–∫—É. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–æ–º–µ–Ω—Ç—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ö–æ–¥—è—Ç –∫ –∫–æ–Ω—Ü—É. –ß—Ç–æ –≤—ã–±–µ—Ä–µ—Ç–µ –≤ —Ñ–∏–Ω–∞–ª–µ?",
      choices: ["‚≠ê –°—Ç–∞—Ç—å –∑–≤–µ–∑–¥–æ–π", "üåë –ü–æ–≥–∞—Å–Ω—É—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞", "‚ôæÔ∏è –í–æ–π—Ç–∏ –≤ –ø–µ—Ç–ª—é"],
      correctIndex: 0,
      messages: ["–¢—å–º–∞ –ø–æ–≥–ª–æ—Ç–∏–ª–∞!", "–ü–µ—Ç–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞!", "–í–´ –í–ó–û–†–í–ê–õ–ò–°–¨ –ö–ê–ö –°–í–ï–†–•–ù–û–í–ê–Ø!"]
    }
  ];
  
  // –≠–õ–ï–ú–ï–ù–¢–´
  const sceneTitle = document.getElementById('scene-title');
  const sceneDescription = document.getElementById('scene-description');
  const buttonsContainer = document.getElementById('buttons-container');
  const alertElement = document.getElementById('alert-element');
  const chaosValue = document.getElementById('chaos-value');
  const scoreValue = document.getElementById('score-value');
  const timeValue = document.getElementById('time-value');
  const gameScene = document.getElementById('game-scene');
  const chaosVisual = document.getElementById('chaos-visual');
  const achievementElements = document.querySelectorAll('.achievement');
  
  // –§–£–ù–ö–¶–ò–ò –•–ê–û–°–ê
  function createParticles() {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = Math.random() * 100 + '%';
    particle.style.animationDelay = Math.random() * 2 + 's';
    document.getElementById('game-container').appendChild(particle);
    setTimeout(() => particle.remove(), 2000);
  }
  
  function updateChaosVisual() {
    chaosVisual.innerHTML = '';
    const elementCount = Math.floor(chaosLevel / 10);
    
    for (let i = 0; i < elementCount; i++) {
      const element = document.createElement('div');
      element.className = 'chaos-element';
      element.style.left = Math.random() * 100 + '%';
      element.style.top = Math.random() * 100 + '%';
      element.style.width = Math.random() * 50 + 30 + 'px';
      element.style.height = Math.random() * 50 + 30 + 'px';
      element.style.background = `radial-gradient(circle, 
        rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.7), 
        transparent)`;
      element.style.borderRadius = Math.random() > 0.5 ? '50%' : '0%';
      element.style.animationDelay = Math.random() * 3 + 's';
      chaosVisual.appendChild(element);
    }
  }
  
  function updateChaos(increase = true) {
    if (increase) {
      chaosLevel += 20;
      if (chaosLevel > 100) chaosLevel = 100;
    }
    chaosValue.textContent = chaosLevel;
    
    // –í–ò–ó–£–ê–õ–¨–ù–´–ô –•–ê–û–°
    if (chaosLevel > 50) {
      gameScene.style.animation = `sceneShake ${0.5 - (chaosLevel / 200)}s infinite`;
    }
    
    updateChaosVisual();
    
    // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    if (chaosLevel >= 50 && !achievements.chaosMaster) {
      achievements.chaosMaster = true;
      achievementElements[1].classList.remove('locked');
      achievementElements[1].classList.add('unlocked');
      achievementElements[1].textContent = '‚úÖ –ú–∞—Å—Ç–µ—Ä —Ö–∞–æ—Å–∞';
      showAlert('–î–û–°–¢–ò–ñ–ï–ù–ò–ï: –ú–∞—Å—Ç–µ—Ä —Ö–∞–æ—Å–∞!', 3000);
    }
  }
  
  function loadScene(sceneIndex) {
    if (sceneIndex >= scenes.length) {
      endGame(true);
      return;
    }
    
    const scene = scenes[sceneIndex];
    sceneTitle.textContent = scene.title;
    sceneDescription.textContent = scene.description;
    buttonsContainer.innerHTML = '';
    
    scene.choices.forEach((choice, index) => {
      const button = document.createElement('button');
      button.className = 'slide-button';
      button.textContent = choice;
      button.onclick = () => makeChoice(index, scene);
      buttonsContainer.appendChild(button);
    });
    
    // –ü–µ—Ä–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
    if (sceneIndex === 0 && !achievements.firstStep) {
      achievements.firstStep = true;
      achievementElements[0].classList.remove('locked');
      achievementElements[0].classList.add('unlocked');
      achievementElements[0].textContent = '‚úÖ –ü–µ—Ä–≤—ã–π —à–∞–≥';
    }
    
    updateChaos(true);
    for (let i = 0; i < 5; i++) {
      setTimeout(createParticles, i * 200);
    }
  }
  
  function showAlert(message, duration = 1500) {
    alertElement.textContent = message;
    setTimeout(() => {
      if (!isGameOver) {
        alertElement.textContent = '‚ö†Ô∏è –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! ‚ö†Ô∏è';
      }
    }, duration);
  }
  
  function showFeedback(message, isCorrect) {
    const feedback = document.createElement('div');
    feedback.className = `choice-feedback ${isCorrect ? 'correct-feedback' : 'wrong-feedback'}`;
    feedback.textContent = message;
    document.getElementById('scene-content').appendChild(feedback);
    
    setTimeout(() => {
      feedback.remove();
    }, 1500);
  }
  
  function makeChoice(choiceIndex, scene) {
    if (isGameOver) return;
    
    const isCorrect = choiceIndex === scene.correctIndex;
    
    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
    showAlert('‚ö†Ô∏è ' + scene.messages[choiceIndex] + ' ‚ö†Ô∏è');
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
    showFeedback(isCorrect ? '‚úì –ü–†–ê–í–ò–õ–¨–ù–û!' : '‚úó –û–®–ò–ë–ö–ê!', isCorrect);
    
    if (isCorrect) {
      score += 100 + (chaosLevel * 2);
      scoreValue.textContent = score;
      currentScene++;
      setTimeout(() => loadScene(currentScene - 1), 1500);
      
      // –≠–§–§–ï–ö–¢ –£–°–ü–ï–•–ê
      for (let i = 0; i < 20; i++) {
        setTimeout(createParticles, i * 50);
      }
    } else {
      score -= 50;
      if (score < 0) score = 0;
      scoreValue.textContent = score;
      gameScene.classList.add('wrong-choice');
      setTimeout(() => gameScene.classList.remove('wrong-choice'), 500);
      
      chaosLevel += 30;
      if (chaosLevel > 100) {
        endGame(false);
      }
    }
  }
  
  function endGame(victory) {
    isGameOver = true;
    buttonsContainer.innerHTML = '';
    
    if (victory) {
      sceneTitle.textContent = "üéÜ –ü–û–ë–ï–î–ê! üéÜ";
      sceneDescription.textContent = `–í—ã –ø—Ä–æ—à–ª–∏ —á–µ—Ä–µ–∑ –≤—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è —Ö–∞–æ—Å–∞ –∏ –≤—ã—à–ª–∏ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º! –í–∞—à–∏ –±–∞–ª–ª—ã: ${score}`;
      showAlert(`‚≠ê –í–´ –ü–û–ö–û–†–ò–õ–ò –•–ê–û–°! –ë–ê–õ–õ–´: ${score} ‚≠ê`, 5000);
      
      // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∑–∞ –ø–æ–±–µ–¥—É
      if (!achievements.entropyWinner) {
        achievements.entropyWinner = true;
        achievementElements[2].classList.remove('locked');
        achievementElements[2].classList.add('unlocked');
        achievementElements[2].textContent = '‚úÖ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å —ç–Ω—Ç—Ä–æ–ø–∏–∏';
      }
    } else {
      sceneTitle.textContent = "üíÄ –•–ê–û–° –ü–û–ë–ï–î–ò–õ üíÄ";
      sceneDescription.textContent = `–≠–Ω—Ç—Ä–æ–ø–∏—è –ø–æ–≥–ª–æ—Ç–∏–ª–∞ –≤–∞—Å. –†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–∞–ª–∞—Å—å –Ω–∞ —á–∞—Å—Ç–∏—Ü—ã. –í–∞—à–∏ –±–∞–ª–ª—ã: ${score}`;
      showAlert(`‚ò†Ô∏è –í–´ –ü–û–ì–õ–û–©–ï–ù–´ –≠–ù–¢–†–û–ü–ò–ï–ô! –ë–ê–õ–õ–´: ${score} ‚ò†Ô∏è`, 5000);
    }
    
    const restartButton = document.createElement('button');
    restartButton.className = 'slide-button';
    restartButton.textContent = 'üîÑ –ù–ê–ß–ê–¢–¨ –ó–ê–ù–û–í–û';
    restartButton.onclick = () => location.reload();
    buttonsContainer.appendChild(restartButton);
  }
  
  // –¢–ê–ô–ú–ï–† –•–ê–û–°–ê
  setInterval(() => {
    if (!isGameOver) {
      timeElapsed++;
      timeValue.textContent = timeElapsed;
      
      if (timeElapsed % 3 === 0) {
        createParticles();
      }
      
      if (timeElapsed % 10 === 0) {
        updateChaos(true);
      }
    }
  }, 1000);
  
  // –ë–ï–°–ö–û–ù–ï–ß–ù–´–ï –ß–ê–°–¢–ò–¶–´
  setInterval(() => {
    if (!isGameOver) {
      createParticles();
    }
  }, 500);
  
  // –°–¢–ê–†–¢ –ò–ì–†–´!
  loadScene(0);
  showAlert('‚ö†Ô∏è –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø –•–ê–û–°! –í–´–ë–ò–†–ê–ô–¢–ï –ú–£–î–†–û! ‚ö†Ô∏è', 3000);
</script>
</body>
</html>
